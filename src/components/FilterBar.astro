---
import FilterIcon from '../icons/FilterIcon.astro'
---

<div class='sm:max-w-72 w-fit bg-[#f0f0f0] rounded-xl px-4 py-2 flex-grow'>
  <label
    for='filter_notes_bar'
    class='flex gap-0 focus-within:gap-2 sm:gap-2 items-center'
  >
    <span><FilterIcon class='opacity-30' /></span>
    <input
      type='search'
      name='filter_notes_bar'
      id='filter_notes_bar'
      placeholder='Reply to emails, Action items...'
      class='bg-transparent border-none focus:border-none focus:outline-none transition-[width] [interpolate-size:allow-keywords] w-0 sm:w-full sm:min-w-56 focus:w-full focus:placeholder-gray-400'
    />
  </label>
</div>

<script>
  import { setSearch } from '../store/notesFilters'

  const filterNotesBar = document.getElementById(
    'filter_notes_bar',
  ) as HTMLInputElement
  filterNotesBar.addEventListener('input', () => {
    setSearch(filterNotesBar.value)
  })
</script>
